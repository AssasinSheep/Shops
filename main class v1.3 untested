 	    String shopclosed = getConfig().getString("messages.Is-The-Shop-Closed");

	    		
		public boolean onCommand(CommandSender sender, Command cmd, String alias, String[] args) {
			if (!(sender instanceof Player)) {
			sender.sendMessage(ChatColor.RED + "Only players may use this command.");
			return true;
			}
			if (cmd.getName().equalsIgnoreCase("shop")) {
			if (args.length == 0) {
			if (shopclosed.equalsIgnoreCase("false")) {
			Player player = (Player) sender;
			if (player.hasPermission("shop.teleport")) {
				World w = Bukkit.getWorld(getConfig().getString("shop.world"));
				double x = getConfig().getDouble("shop.x");
				double y = getConfig().getDouble("shop.y");
				double z = getConfig().getDouble("shop.z");

				player.teleport(new Location(w, x, y, z));
				player.sendMessage(
						ChatColor.translateAlternateColorCodes('&', getConfig().getString("messages.arrived-to-shop")));
			 } else if (shopclosed.equalsIgnoreCase("true")){
			player.sendMessage(
			ChatColor.translateAlternateColorCodes('&', getConfig().getString("messages.Is-The-Shop-Closed")));
			} else {
			if (!player.hasPermission("shop.teleport")) {
			player.sendMessage(
					ChatColor.translateAlternateColorCodes('&', getConfig().getString("messages.no-permission")));
					
			// reload command
			} else { 
	        if (args[0].equalsIgnoreCase("reload")) { //Sender typed '/shop reload'
			if (player.hasPermission("shop.reload")) {
			reloadConfig();
	        sender.sendMessage(
			ChatColor.translateAlternateColorCodes('&', getConfig().getString("messages.reload-config")));
			} else {
			if (!player.hasPermission("shop.reload")) {
			player.sendMessage(
					ChatColor.translateAlternateColorCodes('&', getConfig().getString("messages.no-permission")));
			
			} else {
	        if (args[0].equalsIgnoreCase("set")) { //Sender typed 'shop set'
	        if (player.hasPermission("shop.set")) {
			getConfig().set("shop.world", player.getWorld().getName());
			getConfig().set("shop.x", Double.valueOf(player.getLocation().getX()));
	        getConfig().set("shop.y", Double.valueOf(player.getLocation().getY()));
		    getConfig().set("shop.z", Double.valueOf(player.getLocation().getZ()));
			saveConfig();
			player.sendMessage(ChatColor.translateAlternateColorCodes('&',
			getConfig().getString("messages.successfully-set-shop")));
	        } else { //doesn't have have set permission
			if (!player.hasPermission("shop.set")) {
			player.sendMessage(
					ChatColor.translateAlternateColorCodes('&', getConfig().getString("messages.no-permission")));
			} else {
	        if (args[0].equalsIgnoreCase("open")) { //Sender typed 'shop open'
	        if (player.hasPermission("shop.open")) {
	        getConfig().set("shopclosed", "false");
			
			} else {
	        if (!player.hasPermission("shop.open")) {
			player.sendMessage(
				ChatColor.translateAlternateColorCodes('&', getConfig().getString("messages.no-permission")));
			
	        } else {
	        	 //shop closed 
			    if (args[0].equalsIgnoreCase("close")) { //Sender typed 'shop help'
			    if (player.hasPermission("shop.close")) {
			    getConfig().set("shopclosed", "true");
			     
			    
			} else {
			if (!player.hasPermission("shop.close")) {
			player.sendMessage(
			   ChatColor.translateAlternateColorCodes('&', getConfig().getString("messages.no-permission")));
			//help command
			} else {
		     if (args[0].equalsIgnoreCase("help")) { //Sender typed 'shop help'
		        if (player.hasPermission("shop.help")) {
		        	sender.sendMessage(ChatColor.AQUA + "/shop set" + ChatColor.GREEN + " sets the shop");
		        	sender.sendMessage(ChatColor.AQUA + "/shop reload" + ChatColor.GREEN + " reloads the config");
		        	sender.sendMessage(ChatColor.AQUA + "/shop open" + ChatColor.GREEN + " opens the shop");
		        	sender.sendMessage(ChatColor.AQUA + "/shop close" + ChatColor.DARK_RED + " close the shop");
				} else {
				if (!player.hasPermission("shop.help")) {
				player.sendMessage(
				ChatColor.translateAlternateColorCodes('&', getConfig().getString("messages.no-permission")));
				} else {
			   player.sendMessage(
			    ChatColor.translateAlternateColorCodes('&', getConfig().getString("messages.Invalid-command-used")));
		        }
			return true;
		}
			return true;
	}
	}
	        }
}
}
			}
	        }
			}
			}
			}
			}
			return true;
	    }
}
			}
			}
			}
			}
			return true;
		}
			return true;
	}
	}
